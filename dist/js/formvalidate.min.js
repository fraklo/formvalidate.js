!function(){"use strict";window.FormValidate=function(e){function t(e,t){var r;for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function r(){var e,t;for(e=document.getElementsByClassName(y.formClass),t=0;t<e.length;t++)s(e[t])}function a(e,t){t||(t=e.getAttribute("data-"+y.dataTag)),t&&L.indexOf(t)>=0&&e.addEventListener("keyup",function(e){var r=e.target;r.value=l(r.value,t,!0)})}function s(e){var t,r,s;for(n(e),t=e.querySelectorAll("input,textarea,select"),r=0;r<t.length;r++){var o=t[r];(y.activeInputFiltering||o.getAttribute("data-active-validation"))&&a(o)}s=e.getElementsByClassName(y.submitClass)[0],s.addEventListener("click",function(r){e.className=e.className.replace(y.formSuccessClass,""),e.className.indexOf(y.processingClass)<0&&(e.className=e.className+" "+y.processingClass,i(e,t,!0))})}function n(e){var t=e.className.toLowerCase(),r=y.formSuccessClass.toLowerCase();e.addEventListener("submit",function(e){t.indexOf(r)<0&&e.preventDefault()})}function i(e,t,r){var a,s,n,i={},l={isValid:!0,errors:[]};for(s=0;s<t.length;s++)a=t[s],"radio"===a.type.toLowerCase()?a.getAttribute("data-"+y.requiredTag)&&(i[a.name]=!0):(n=o(a),n||(l.isValid=!1,a.name&&l.errors.push(a.name)));for(var c in i)i.hasOwnProperty(c)&&(b(c)||(l.errors.push(c),l.isValid=!1));return l.isValid?e.className=e.className.replace(y.processingClass,y.formSuccessClass):e.className=e.className.replace(y.processingClass,""),r&&l.isValid?void e.submit():l}function o(e,t,r){var a,s;return(r||e.getAttribute("data-"+y.requiredTag))&&(r=!0),s="select"===e.tagName.toLowerCase()?"select":e.type.toLowerCase(),a=!0,"select"===s?r&&0===e.selectedIndex&&(a=!1):"radio"===s?r&&(a=b(e.name)):(t||(t=e.getAttribute("data-"+y.dataTag)),"checkbox"===s&&r?a=h(e):t&&L.indexOf(t)>=0&&(0===e.value.length?r&&(a=!1):a=l(e.value,t))),a||N(e),a}function l(e,t,r){switch(t){case"alpha":e=c(e,r);break;case"alpha_num":e=u(e,r);break;case"decimal":e=f(e,r);break;case"email":e=m(e,r);break;case"integer":e=d(e,r);break;case"name":e=p(e,r);break;case"phone":e=g(e,r);break;case"plain_text":e=v(e,r)}return e}function c(e,t){var r=/[^a-zA-Z]/g;return t?e=e.replace(r,""):(r=/^[a-zA-Z]+$/,e=r.test(e)),e}function u(e,t){var r=/[^a-zA-Z0-9]/g;return t?e=e.replace(r,""):(r=/^[a-zA-Z0-9]+$/,e=r.test(e)),e}function f(e,t){var r,a=/[^0-9.]/g;return t?(e=e.replace(a,""),r=e.indexOf("."),r>=0&&(e=e.slice(0,r)+"."+e.slice(r).replace(/[.]/g,""))):(a=/^\d+(\.\d+)/,e=a.test(e)),e}function m(e,t){var r=/[^\w-@\.\+]/g;return t?e=e.replace(r,""):(r=/^([\w-\.\+]+@([\w-]+\.)+[\w-]{2,})?$/,e=r.test(e)),e}function d(e,t){var r=/[^\d]/g;return t?e=e.replace(r,""):(r=/^[\d]+$/,e=r.test(e)),e}function p(e,t){var r=/[^-.\sa-zA-Z]/g;return t?e=e.replace(r,""):(r=/^([-.\sa-zA-Z])/,e=r.test(e)),e}function g(e,t){var r,a=10,e=d(e,!0),s="-";return t?e.length>=a?(e=e.replace(/(\d{3})(\d{3})(\d{4})/,"$1"+s+"$2"+s+"$3"),e=e.substring(0,a+2)):e=e.length>6?e.replace(/(\d{3})(\d{3})/,"$1"+s+"$2"+s):e.replace(/(\d{3})/,"$1"+s):(r=/(\d{3})(\d{3})(\d{4})/,e=e.length===a&&r.test(e)?!0:!1),e}function v(e,t){var r,a=/[^\w-.!@#$%&*()+?;:,'\s]/g;return t?r=e.replace(a,""):(a=/^([\w-.!@#$%&*()+?;:,'\s])/,r=a.test(e)),r}function h(e){return e.checked}function _(e){var t=e.target,r=t;"self"!==y.errorTarget&&(r=w(t,y.errorTarget)),"radio"===t.type.toLowerCase()?C(t.name):(r.className=r.className.replace(" "+y.errorClass,""),t.removeEventListener("focus",N,!1))}function C(e){var t,r,a,s=document.getElementsByName(e);for(t=0;t<s.length;t++)r=s[t],a=r,"self"!==y.errorTarget&&(a=w(r,y.errorTarget)),a.className=a.className.replace(" "+y.errorClass,""),r.removeEventListener("focus",N,!1)}function N(e){var t=e;"self"!==y.errorTarget&&(t=w(e,y.errorTarget)),t.className.indexOf(y.errorClass)<0&&(t.className=t.className+" "+y.errorClass,e.addEventListener("focus",_,!1))}function b(e){var t,r=document.getElementsByName(e),a=!1;for(t=0;t<r.length;t++)if(r[t].checked){a=!0;break}if(a===!1)for(t=0;t<r.length;t++)N(r[t]);return a}function w(e,t){var r;for(t=t.toLowerCase();e.parentNode&&(r=e.className.toLowerCase(),!(r.indexOf(t)>-1));)e=e.parentNode;return e}var y,F={activeInputFiltering:!0,dataTag:"validate",formClass:"js_form_validate",formSuccessClass:"validate-success",errorClass:"error",errorTarget:"self",processingClass:"processing",requiredTag:"required",submitClass:"js_form_validate_submit"},L=["alpha","alpha_num","decimal","email","integer","name","phone","plain_text"];y=e&&"object"==typeof e?t(F,e):F,this.form__init=function(){r()},this.form__setForm=function(e){s(e)},this.form__setInputFiltering=function(e,t){a(e,t)},this.form__validateForm=function(e,t){var r=e.querySelectorAll("input,textarea,select");return n(e),i(e,r,t)},this.form__validateInput=function(e,t){return o(e,t,!0)}},FormValidate.prototype.init=function(){this.form__init()},FormValidate.prototype.setForm=function(e){var t;for(t=0;t<e.length;t++)this.form__setForm(e[t])},FormValidate.prototype.setInputFiltering=function(e,t){var r;for(r=0;r<e.length;r++)this.form__setInputFiltering(e[r],t)},FormValidate.prototype.validateForm=function(e,t){var r,a;for(r=0;r<e.length;r++)a=this.form__validateForm(e[r],t);return a},FormValidate.prototype.validateInput=function(e,t){return this.form__validateInput(e[0],t)}}(),function(){}.call(this);
